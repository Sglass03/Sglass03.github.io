(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1190:function(e,t,n){"use strict";n.r(t),n.d(t,"WrappedLogin",(function(){return sn}));var o=n(0),r=n.n(o),i=n(8),a=n(33),s=n(79),l=n(1),c=n.n(l),u=n(2),d=n(17),g=n(10),p=n(117),f=n(319),b=n(22),h=n(7),m=n.n(h),y=n(1291),O=n.n(y),E=n(561);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=R(e);if(t){var r=R(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(n,e);var t=S(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=t.call(this,e),Object(b.trackUiUsage)({uiElement:Object(E.n)(e.isModal,!1),action:"displayed"}),o.handleClose=o.handleClose.bind(j(o)),o.handleClickOutsideLogin=o.handleClickOutsideLogin.bind(j(o)),o}return w(n,null,[{key:"propTypes",get:function(){return{children:c.a.node.isRequired,fitContainer:c.a.bool.isRequired,headerTxt:c.a.string,isModal:c.a.bool,modalClassName:c.a.string,onModalClose:c.a.func,fromP2pLinks:c.a.bool,showSocialLoginOnly:c.a.bool}}},{key:"defaultProps",get:function(){return{isModal:!1,headerTxt:"",modalClassName:"",onModalClose:g.emptyFunction,fromP2pLinks:!1,showSocialLoginOnly:!1}}}]),w(n,[{key:"handleClose",value:function(){Object(b.trackUiUsage)({uiElement:Object(E.n)(this.props.isModal,!1),uiObject:"close_button_or_outside",action:"clicked"}),this.props.onModalClose()}},{key:"handleClickOutsideLogin",value:function(e){this.props.isModal&&"outsideModal"===e.target.id&&this.handleClose()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.headerTxt,o=e.isModal,i=e.modalClassName,a=e.fromP2pLinks,s=e.showSocialLoginOnly,l=e.fitContainer,c=a?Object(u.a)("listings.conquest.p2p.sign.in.or.register"):"".concat(n);return r.a.createElement("div",{id:"outsideModal",className:m()(O.a.cgLoginComponent,O.a.show,O.a[i],o&&O.a.modal),onClick:this.handleClickOutsideLogin,role:"dialog","data-cg-ft":"login-component"},r.a.createElement("div",{className:m()(O.a.block,!l&&(o?O.a.modalInner:O.a.header))},a&&r.a.createElement("div",{className:"p2pLoginIconModal"},r.a.createElement("img",{src:"/gfx/icons/message-bubble-red-dot.png",alt:""})),!s&&r.a.createElement("div",{className:O.a.panelHeading},r.a.createElement("button",{className:m()(O.a.modalClose,o&&O.a.show),onClick:this.handleClose,"aria-label":Object(u.a)("common.close")},r.a.createElement("span",null,"x")),r.a.createElement("h1",{className:O.a.loginHeading,dangerouslySetInnerHTML:{__html:c}})),r.a.createElement("div",{className:O.a.panelBody},t),!s&&r.a.createElement("div",{className:"login-modal-inner-footer"})))}}]),n}(r.a.Component),P=n(18),A=n(577),T={uiElement:E.k,action:"displayed"},q={uiElement:E.k,uiObject:"close_button_or_outside",action:"clicked"};function I(e){var t=e.children,n=e.isModal,i=e.onModalClose,a=e.headerTxt;Object(o.useEffect)((function(){Object(b.trackUiUsage)(T)}),[]);var s=function(){Object(b.trackUiUsage)(q),i()};return r.a.createElement("div",{id:"outsideModal",className:m()(O.a.cgLoginComponent,O.a.modal,O.a.show,O.a.sliderBackground),role:"dialog",onClick:function(e){n&&"outsideModal"===e.target.id&&s()},"data-cg-ft":"login-component"},r.a.createElement("div",{className:m()(O.a.modalInner,O.a.slider)},r.a.createElement("div",{className:O.a.sliderTitle},r.a.createElement("h3",null,a),r.a.createElement("button",{className:m()(O.a.sliderClose),onClick:s,"aria-label":Object(u.a)("common.close")},r.a.createElement("span",null,"Ã—"))),r.a.createElement("div",{className:O.a.sliderCta},r.a.createElement(P.FontAwesomeIcon,{icon:A.faHeart}),r.a.createElement("h4",null,Object(u.a)("login.slider.cta"))),r.a.createElement("div",{className:O.a.panelBody},t)))}function M(e){return e.sliderTheme?r.a.createElement(I,e):r.a.createElement(_,e)}I.propTypes={children:c.a.node.isRequired,headerTxt:c.a.string.isRequired,onModalClose:c.a.func},I.defaultProps={headerTxt:"",onModalClose:g.emptyFunction},M.propTypes={children:c.a.node.isRequired,fitContainer:c.a.bool.isRequired,headerTxt:c.a.string,isModal:c.a.bool,onModalClose:c.a.func,fromP2pLinks:c.a.bool,showSocialLoginOnly:c.a.bool,sliderTheme:c.a.bool},M.defaultProps={isModal:!1,headerTxt:"",onModalClose:g.emptyFunction,fromP2pLinks:!1,showSocialLoginOnly:!1,sliderTheme:!1};var U=n(849),F=n(12),N=n(1347),B=n.n(N),G=n(24),D=n(2073),x=n(165),V=c.a.shape({authCodeTtl:c.a.number,authCodeHmac:c.a.string,authCodeInfoMsg:c.a.string,loginEmail:c.a.string,redirectUrl:c.a.string,skipOptionalStep:c.a.bool,sourceId:c.a.string,whyRegister:c.a.string,zip:c.a.string}),H=c.a.shape({authenticationToken:c.a.string,googleAccountBinding:c.a.bool,redirectUrl:c.a.string,serviceProvider:c.a.string,skipOptionalStep:c.a.bool,sourceId:c.a.string,startUrl:c.a.string,whyRegister:c.a.string,zip:c.a.string,disableForMobileApp:c.a.bool}),z=c.a.shape({fbUser:c.a.bool.isRequired,googleAccountBinding:c.a.bool.isRequired,isGoogleAccountBindingRequest:c.a.bool.isRequired,isGoogleUser:c.a.bool.isRequired,recaptchaSiteKey:c.a.string,redirectUrl:c.a.string.isRequired,showRecaptcha:c.a.bool,sourceId:c.a.string.isRequired,whyRegister:c.a.string.isRequired,zip:c.a.string.isRequired}),W=c.a.shape({initiallyDisplayedScreenName:c.a.string,showSkipButton:c.a.bool,redirectUrl:c.a.string,startUrl:c.a.string,originalScreenName:c.a.string,whyRegister:c.a.string,sourceId:c.a.string,authenticationToken:c.a.string}),J=c.a.shape({appId:c.a.number,redirectUrl:c.a.string,sourceId:c.a.string,stateToken:c.a.string}),K=c.a.shape({clientId:c.a.string,sourceId:c.a.string}),X=c.a.shape({hideGoBackLinks:c.a.bool,passwordResetLinkSent:c.a.bool,email:c.a.string,sourceId:c.a.string,whyRegister:c.a.string,zip:c.a.string}),Q=c.a.shape({isModal:c.a.bool,onLogin:c.a.func,redirectUrl:c.a.string,responseRedirect:c.a.string,updateUserMenuOnLogin:c.a.bool});function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e){var t=e.reloadAfterOnLoginSuccess,n=e.setVisibility,i=e.successCallbackConfig,a=e.appleIdLoaded,s=e.sliderTheme,l=e.isModalLogin;return Object(o.useEffect)((function(){Object(b.trackUiUsage)({uiElement:Object(E.n)(l,s),uiObject:E.a,action:"displayed"})}),[l,s]),Object(o.useEffect)((function(){var e=function(e){if(null==e?void 0:e.detail){var o=new Headers;o.append("Accept","application/json"),o.append("Accept","text/javascript"),o.append("Accept","*/*"),G.a.requestPost({path:Object(F.a)("f:authentication.appleLogin"),requestOptions:{headers:o},body:{authenticationToken:encodeURIComponent(JSON.stringify(e.detail))}}).then((function(e){return e.json()})).then((function(e){e.success?Object(x.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({reloadAfterOnLoginSuccess:t,setVisibility:n},i)):alert(e.errors.action.join(","))}))}};return document.addEventListener("AppleIDSignInOnSuccess",e),function(){return document.removeEventListener("AppleIDSignInOnSuccess",e)}}),[]),Object(o.useEffect)((function(){var e=function(e){var t;"popup_closed_by_user"!==(null==e||null===(t=e.detail)||void 0===t?void 0:t.error)&&alert(Object(u.a)("login.apple.error.unexpected"))};return document.addEventListener("AppleIDSignInOnFailure",e),function(){return document.removeEventListener("AppleIDSignInOnFailure",e)}}),[]),r.a.createElement(B.a,{type:"button",fullWidth:!0,icon:D.faApple,onClick:function(){var e;Object(b.trackUiUsage)({uiElement:Object(E.n)(l,s),uiObject:E.a,action:"clicked"}),AppleID&&(null===(e=AppleID.auth)||void 0===e?void 0:e.signIn)&&AppleID.auth.signIn()},variant:"secondary",iconCentered:!0,disabled:!a,iconOnly:s,ariaLabelledById:"login-button-apple"},Object(u.a)("login_register.form.apple_sign_in.link"))}function ee(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}$.propTypes={reloadAfterOnLoginSuccess:c.a.bool.isRequired,setVisibility:c.a.func.isRequired,successCallbackConfig:Q.isRequired,appleIdLoaded:c.a.bool,sliderTheme:c.a.bool.isRequired,isModalLogin:c.a.bool.isRequired},$.defaultProps={appleIdLoaded:!1};var ne=0;function oe(e){var t=e.autoComplete,n=e.className,o=e.disabled,i=e.fieldErrors,a=e.label,s=e.name,l=e.onChange,c=e.placeholder,u=e.required,d=e.type,g=e.value,p=e.dataCgFt,f=!!i.length,b=f?i.map((function(e){return r.a.createElement("span",{key:"fieldError".concat(ne+=1)},e,r.a.createElement("br",null))})).reduce((function(e,t){return null===e?[t]:[].concat(ee(e),[t])}),null):null,h=r.a.createElement("div",{className:O.a.helpBlock},b),y=r.a.createElement("label",{className:O.a.controlLabel,htmlFor:s},a," ");return r.a.createElement("div",{className:m()(O.a.formGroup,f&&O.a.hasError,f&&O.a.hasFeedback)},r.a.createElement("div",{className:O.a.controls},a&&y,r.a.createElement("input",{autoComplete:t,className:m()(O.a.formControl,n),disabled:o,id:s,name:s,onChange:l,placeholder:c,required:u,type:d,value:g,"data-cg-ft":p}),r.a.createElement("div",{"aria-live":"polite"},f&&h)))}function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ae(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=de(e);if(t){var r=de(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ce(this,n)}}function ce(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}oe.propTypes={autoComplete:c.a.string,className:c.a.string,disabled:c.a.bool,fieldErrors:c.a.arrayOf(c.a.string),label:c.a.string,name:c.a.string,onChange:c.a.func,placeholder:c.a.string,required:c.a.bool,type:c.a.string,value:c.a.string,dataCgFt:c.a.string},oe.defaultProps={autoComplete:"on",className:"",disabled:!1,fieldErrors:[],label:"",name:"",onChange:g.emptyFunction,placeholder:"",required:!1,type:"text",value:"",dataCgFt:void 0};var ge=0;var pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(n,e);var t=le(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={showAlert:!0},o.handleClose=o.handleClose.bind(ue(o)),o}return ae(n,null,[{key:"propTypes",get:function(){return{actionErrors:c.a.arrayOf(c.a.string),id:c.a.string,showClose:c.a.bool}}},{key:"defaultProps",get:function(){return{actionErrors:[],id:"errorMessageBox",showClose:!0}}}]),ae(n,[{key:"componentDidUpdate",value:function(e){this.props.actionErrors!==e.actionErrors&&this.setState({showAlert:!0})}},{key:"handleClose",value:function(e){e.preventDefault(),this.setState({showAlert:!1})}},{key:"render",value:function(){if(!!!this.props.actionErrors.length)return null;var e=this.props.actionErrors.map((function(e){return r.a.createElement("p",{key:"errorMessage".concat(ge+=1),dangerouslySetInnerHTML:{__html:e}})}));return this.state.showAlert&&r.a.createElement("div",{id:this.props.id,className:m()(O.a.alert,O.a.alertDanger)},this.props.showClose&&r.a.createElement("button",{className:O.a.close,onClick:this.handleClose},"x"),e)}}]),n}(o.PureComponent),fe=n(362);function be(e){var t=e.disableEmailField,n=e.loginEnterEmailConfig,i=e.loginEmail,a=e.onSubmit,s=e.actionErrors,l=e.fieldErrors,c=e.updateEmail,d=e.isModalLogin,g=e.sliderTheme,p=Object(fe.a)().isMobile;Object(o.useEffect)((function(){Object(b.trackUiUsage)({uiElement:Object(E.n)(d,g),uiObject:E.i,action:"displayed"})}),[d,g]),Object(o.useEffect)((function(){p||document.getElementById("registerEmail").focus()}),[p]);var f=n.redirectUrl,h=Object(u.a)("common.next"),y=Object(F.a)("f:page.privacyPolicy"),v=Object(F.a)("f:page.TermsOfUse"),k=Object(u.a)("listings.login.disclosure",h,v,y);return r.a.createElement("div",null,r.a.createElement(pe,{actionErrors:s}),r.a.createElement("form",{onSubmit:function(e){Object(b.trackUiUsage)({uiElement:Object(E.n)(d,g),uiObject:E.i,action:"submitted"}),e&&e.preventDefault&&e.preventDefault(),a(n.googleAccountBinding)}},r.a.createElement("input",{type:"hidden",value:f,id:"regLoginRedirectUrl"}),r.a.createElement(oe,{autoComplete:"email",disabled:t,fieldErrors:l,id:"registerEmail",label:Object(u.a)("email.address.label"),name:"registerEmail",onChange:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;"registerEmail"===e.target.name&&c(t)},required:!0,value:i,dataCgFt:"login-email-input"}),r.a.createElement(B.a,{fullWidth:!0,variant:"secondary",dataCgFt:"login-next-button"},h),r.a.createElement("div",{className:m()(O.a.cgDisclaimer,g&&O.a.sliderDisclaimer),dangerouslySetInnerHTML:{__html:k}})))}be.propTypes={disableEmailField:c.a.bool,loginEnterEmailConfig:H.isRequired,loginEmail:c.a.string,onSubmit:c.a.func,actionErrors:c.a.arrayOf(c.a.string).isRequired,fieldErrors:c.a.arrayOf(c.a.string).isRequired,updateEmail:c.a.func.isRequired,isModalLogin:c.a.bool,sliderTheme:c.a.bool},be.defaultProps={disableEmailField:!1,loginEmail:"",onSubmit:g.emptyFunction,isModalLogin:!1,sliderTheme:!1};var he=n(1327);function me(e){var t=e.config,n=e.isModalLogin,i=e.sliderTheme,a=Object(fe.a)().isDesktop;Object(o.useEffect)((function(){Object(b.trackUiUsage)({uiElement:Object(E.n)(n,i),uiObject:E.c,action:"displayed"})}),[n,i]),Object(o.useEffect)((function(){a&&(window.CG||(window.CG={}),window.CG.Auth||(window.CG.Auth={}),window.CG.Auth.executeFacebookOAuthLoginSuccess||(window.CG.Auth.executeFacebookOAuthLoginSuccess=function(){var e=new CustomEvent(E.b);document.dispatchEvent(e)}))}),[a]);return r.a.createElement(B.a,{id:"regFBButton",type:"button",fullWidth:!0,icon:he.faFacebookSquare,onClick:function(){Object(b.trackUiUsage)({uiElement:Object(E.n)(n,i),uiObject:E.c,action:"clicked"}),Object(x.h)(t.appId,t.sourceId,x.a,t.stateToken,t.redirectUrl,n)},variant:"secondary",iconCentered:!0,iconOnly:i,ariaLabelledById:"login-button-facebook"},Object(u.a)("login_register.form.fb_sign_in.link"))}me.propTypes={config:J,isModalLogin:c.a.bool.isRequired,sliderTheme:c.a.bool.isRequired},me.defaultProps={config:{}};var ye=n(87),Oe=n(2074);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e){var t=this,n=e.config,i=e.googleAuth2,a=e.handleGoogleBindEvent,s=e.reloadAfterOnLoginSuccess,l=e.setVisibility,c=e.spinnerCallback,d=e.successCallbackConfig,g=e.sliderTheme,p=e.isModalLogin;Object(o.useEffect)((function(){Object(b.trackUiUsage)({uiElement:Object(E.n)(p,g),uiObject:E.d,action:"displayed"})}),[p,g]);var f=function(e){var t=n.sourceId;c(!0,Object(u.a)("login.logging_in"));var o="".concat(Object(F.a)("f:authentication.googleLogin")),r={springSecurityRememberMe:!0,"authRequestContext.sourceId":t,accessToken:e.getAuthResponse().id_token},i=new Headers;i.append("Accept","application/json"),i.append("Accept","text/javascript"),i.append("Accept","*/*"),G.a.requestPost({path:o,requestOptions:{headers:i},body:r}).then((function(e){return e.json()})).then((function(e){if(e.success)Object(x.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({reloadAfterOnLoginSuccess:s,setVisibility:l},d)),c(!1);else{var t=e.bindGoogle;if(e.errors.action.some((function(e){return Object(u.a)("login.google.confirm.password")===e}))&&t)return a(!0,t),void c(!1);c(!1),alert(e.errors.action.join(" "))}})).catch((function(e){ye.a.captureException(e),c(!1),alert(Object(u.a)("login.error.unexpected"))}))},h=function(e){if(c(!1),e)if("tokenFailed"===e.type&&"Access denied."===e.reason);else{var t=" ".concat(e.reason||e.error);alert(Object(u.a)("login.google.failure.reason")+t)}else alert(Object(u.a)("login.google.failure.reason.unknown"))};return r.a.createElement(B.a,{type:"button",fullWidth:!0,icon:Oe.faGoogle,onClick:function(e){e.preventDefault(),Object(b.trackUiUsage)({uiElement:Object(E.n)(p,g),uiObject:E.d,action:"clicked"}),i&&i.signIn&&i.signIn().then(f.bind(t),h)},variant:"secondary",iconCentered:!0,disabled:!i.signIn,iconOnly:g,ariaLabelledById:"login-button-google"},Object(u.a)("login_register.form.google_sign_in.link"))}ke.propTypes={config:K,googleAuth2:c.a.shape({signIn:c.a.func}),handleGoogleBindEvent:c.a.func,reloadAfterOnLoginSuccess:c.a.bool.isRequired,setVisibility:c.a.func.isRequired,spinnerCallback:c.a.func.isRequired,successCallbackConfig:Q.isRequired,sliderTheme:c.a.bool.isRequired,isModalLogin:c.a.bool.isRequired},ke.defaultProps={config:{},handleGoogleBindEvent:g.emptyFunction,googleAuth2:{signIn:g.emptyFunction}};var we=n(669),Ce=[];function Se(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:n}),e)}function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Re(e,t,n){return t&&je(e.prototype,t),n&&je(e,n),e}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=qe(e);if(t){var r=qe(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Ae(this,n)}}function Ae(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?Te(e):t}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(n,e);var t=Pe(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={emailActionErrors:Ce,emailFieldErrors:Ce,registerEmail:o.props.loginEmail?o.props.loginEmail:o.props.emailFromCookies},o.updateEmail=o.updateEmail.bind(Te(o)),o.submitEmailAddress=o.submitEmailAddress.bind(Te(o)),o.handleGoogleBindEvent=o.handleGoogleBindEvent.bind(Te(o)),o}return Re(n,null,[{key:"propTypes",get:function(){return{disableEmailField:c.a.bool,history:c.a.shape({push:c.a.func}).isRequired,facebookConfig:J,googleConfig:K,googleAuth2:c.a.shape({signIn:c.a.func}),appleIdLoaded:c.a.bool,handleEmailEntered:c.a.func,isModalLogin:c.a.bool,loginEmail:c.a.string,emailFromCookies:c.a.string,fromP2pLinks:c.a.bool,isRegisteredUser:c.a.bool,loginSigninConfig:H.isRequired,reloadAfterOnLoginSuccess:c.a.bool.isRequired,setVisibility:c.a.func.isRequired,showAppleLogin:c.a.bool.isRequired,showFacebookLogin:c.a.bool.isRequired,showGoogleLogin:c.a.bool.isRequired,spinnerCallback:c.a.func.isRequired,successCallbackConfig:Q.isRequired,sliderTheme:c.a.bool.isRequired}}},{key:"defaultProps",get:function(){return{disableEmailField:!1,facebookConfig:{},googleConfig:{},googleAuth2:null,appleIdLoaded:!1,handleEmailEntered:g.emptyFunction,loginEmail:"",emailFromCookies:"",isModalLogin:!1,fromP2pLinks:!1,isRegisteredUser:!1,sliderTheme:!1}}}]),Re(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loginEmail,n=e.fromP2pLinks,o=e.isRegisteredUser,r=this.props.loginSigninConfig,i=r.googleAccountBindingRedirect,a=r.googleAccountBinding;i&&a&&t&&this.handleGoogleBindEvent(a,t),n&&o&&this.submitEmailAddress(a)}},{key:"componentDidUpdate",value:function(e){var t=this.props.loginEmail;t!==e.loginEmail&&this.setState({registerEmail:t})}},{key:"updateEmail",value:function(e){this.setState({registerEmail:e})}},{key:"submitEmailAddress",value:function(e){var t=this,n=this.props,o=n.history,r=n.handleEmailEntered,i=n.successCallbackConfig,a=n.spinnerCallback,s=n.setVisibility,l=n.reloadAfterOnLoginSuccess,c=this.props.loginSigninConfig,u=c.redirectUrl,d=c.whyRegister,g=c.sourceId,p=c.zip,f=c.startUrl,b=void 0===f?"":f,h=c.skipOptionalStep,m=c.authenticationToken,y=c.serviceProvider,O=this.state.registerEmail,E={registerEmail:O,redirectUrl:u,"authRequestContext.whyRegister":d,"authRequestContext.sourceId":g,"authRequestContext.zip":p,springSecurityRememberMe:!0,startUrl:b,skipOptionalStep:h,authenticationToken:m,secure1:"",secure2:"rosebud",googleAccountBinding:e};y&&(E.serviceProvider=y),Object(we.e)(E,{history:o,onSubmit:r,registerEmail:O,reloadAfterOnLoginSuccess:l,setVisibility:s,skipOptionalStep:h,spinnerCallback:a},i).then((function(e){e.success||t.setState({emailFieldErrors:Se(e,"fieldErrors.registerEmail",Ce),emailActionErrors:e.actionErrors.length?e.actionErrors:Ce})}))}},{key:"handleGoogleBindEvent",value:function(e,t){var n=this;this.setState({registerEmail:t},(function(){n.submitEmailAddress(e)}))}},{key:"render",value:function(){var e=this.props,t=e.facebookConfig,n=e.googleConfig,o=e.googleAuth2,i=e.appleIdLoaded,a=e.disableEmailField,s=e.loginSigninConfig,l=e.successCallbackConfig,c=e.showAppleLogin,d=e.showFacebookLogin,g=e.showGoogleLogin,p=e.isModalLogin,f=e.spinnerCallback,b=e.setVisibility,h=e.reloadAfterOnLoginSuccess,y=e.sliderTheme,E=s.whyRegister,v=this.state,k=v.emailActionErrors,w=v.emailFieldErrors,C=v.registerEmail,S=[];if(d){var L=r.a.createElement("div",{className:O.a.cgLoginRegisterOauth},r.a.createElement(me,{config:t,isModalLogin:p,sliderTheme:y}));S.push({btn:L,key:"facebook"})}if(g&&!o.error){var j=r.a.createElement("div",{className:O.a.cgLoginRegisterOauth},r.a.createElement(ke,{config:n,googleAuth2:o,handleGoogleBindEvent:this.handleGoogleBindEvent,reloadAfterOnLoginSuccess:h,setVisibility:b,spinnerCallback:f,successCallbackConfig:l,sliderTheme:y,isModalLogin:p}));S.push({btn:j,key:"google"})}if(c){var R=r.a.createElement("div",{className:O.a.cgLoginRegisterOauth},r.a.createElement($,{reloadAfterOnLoginSuccess:h,setVisibility:b,successCallbackConfig:l,appleIdLoaded:i,sliderTheme:y,isModalLogin:p}));S.push({btn:R,key:"apple"})}var _=S.map((function(e){return r.a.createElement("li",{key:e.key},e.btn)}));return(r.a.createElement("div",null,E&&!y&&r.a.createElement("div",{className:m()(O.a.alert,O.a.alertInfo),dangerouslySetInnerHTML:{__html:E}}),r.a.createElement(be,{onSubmit:this.submitEmailAddress,facebookConfig:t,googleConfig:n,loginEmail:C,disableEmailField:a,actionErrors:k,fieldErrors:w,updateEmail:this.updateEmail,loginEnterEmailConfig:s,isModalLogin:p,sliderTheme:y}),(d||g||c)&&(y?r.a.createElement("p",{className:O.a.sliderLoginDivider},Object(u.a)("mobile.login_register.login_option_divider.or_sign_in_with")):r.a.createElement("p",{className:O.a.regLoginDivider},Object(u.a)("mobile.login_register.login_option_divider"))),_.length&&r.a.createElement("ul",{className:m()(O.a.oauthButtonContainer,O.a.socialLoginList),"data-login-button-amount":_.length.toString()},_),r.a.createElement(U.a,{isLoggedInPerson:!1,zip:""})))}}]),n}(o.PureComponent),Me=Object(a.withRouter)(Ie);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ne(e,t,n){return t&&Fe(e.prototype,t),n&&Fe(e,n),e}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Ve(e);if(t){var r=Ve(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return De(this,n)}}function De(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?xe(e):t}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(n,e);var t=Ge(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={emailActionErrors:Ce,emailFieldErrors:Ce,registerEmail:o.props.loginEmail},o.updateEmail=o.updateEmail.bind(xe(o)),o.submitEmailAddress=o.submitEmailAddress.bind(xe(o)),o.handleGoogleBindEvent=o.handleGoogleBindEvent.bind(xe(o)),o}return Ne(n,null,[{key:"propTypes",get:function(){return{history:c.a.shape({push:c.a.func}).isRequired,facebookConfig:J,googleConfig:K,googleAuth2:c.a.shape({signIn:c.a.func}),handleEmailEntered:c.a.func,isModalLogin:c.a.bool,loginEmail:c.a.string,fromP2pLinks:c.a.bool,isRegisteredUser:c.a.bool,loginSigninConfig:H.isRequired,reloadAfterOnLoginSuccess:c.a.bool.isRequired,setVisibility:c.a.func.isRequired,showFacebookLogin:c.a.bool.isRequired,showGoogleLogin:c.a.bool.isRequired,showAppleLogin:c.a.bool.isRequired,spinnerCallback:c.a.func.isRequired,successCallbackConfig:Q.isRequired}}},{key:"defaultProps",get:function(){return{facebookConfig:{},googleConfig:{},googleAuth2:null,handleEmailEntered:g.emptyFunction,loginEmail:"",isModalLogin:!1,fromP2pLinks:!1,isRegisteredUser:!1}}}]),Ne(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loginEmail,n=e.fromP2pLinks,o=e.isRegisteredUser,r=this.props.loginSigninConfig,i=r.googleAccountBindingRedirect,a=r.googleAccountBinding;i&&a&&t&&this.handleGoogleBindEvent(a,t),n&&o&&this.submitEmailAddress(a)}},{key:"componentDidUpdate",value:function(e){var t=this.props.loginEmail;t!==e.loginEmail&&this.setState({registerEmail:t})}},{key:"updateEmail",value:function(e){this.setState({registerEmail:e})}},{key:"submitEmailAddress",value:function(e){var t=this,n=this.props,o=n.history,r=n.handleEmailEntered,i=n.successCallbackConfig,a=n.spinnerCallback,s=n.setVisibility,l=n.reloadAfterOnLoginSuccess,c=this.props.loginSigninConfig,u=c.redirectUrl,d=c.whyRegister,g=c.sourceId,p=c.zip,f=c.startUrl,b=void 0===f?"":f,h=c.skipOptionalStep,m=c.authenticationToken,y=c.serviceProvider,O=this.state.registerEmail,E={registerEmail:O,redirectUrl:u,"authRequestContext.whyRegister":d,"authRequestContext.sourceId":g,"authRequestContext.zip":p,springSecurityRememberMe:!0,startUrl:b,skipOptionalStep:h,authenticationToken:m,secure1:"",secure2:"rosebud",googleAccountBinding:e};y&&(E.serviceProvider=y),Object(we.e)(E,{history:o,onSubmit:r,registerEmail:O,reloadAfterOnLoginSuccess:l,setVisibility:s,skipOptionalStep:h,spinnerCallback:a},i).then((function(e){e.success||t.setState({emailFieldErrors:Se(e,"fieldErrors.registerEmail",Ce),emailActionErrors:e.actionErrors.length?e.actionErrors:Ce})}))}},{key:"handleGoogleBindEvent",value:function(e,t){var n=this;this.setState({registerEmail:t},(function(){n.submitEmailAddress(e)}))}},{key:"render",value:function(){var e=this.props,t=e.facebookConfig,n=e.googleConfig,o=e.googleAuth2,i=e.successCallbackConfig,a=e.showFacebookLogin,s=e.showGoogleLogin,l=e.showAppleLogin,c=e.isModalLogin,u=e.spinnerCallback,d=e.setVisibility,g=e.reloadAfterOnLoginSuccess;return(r.a.createElement("div",null,a&&r.a.createElement("div",{className:O.a.cgLoginRegisterOauth},r.a.createElement(me,{config:t,isModalLogin:c})),s&&r.a.createElement("div",{className:O.a.cgLoginRegisterOauth},r.a.createElement(ke,{config:n,googleAuth2:o,handleGoogleBindEvent:this.handleGoogleBindEvent,reloadAfterOnLoginSuccess:g,setVisibility:d,spinnerCallback:u,successCallbackConfig:i,isModalLogin:c})),l&&r.a.createElement("div",{className:O.a.cgLoginRegisterOauth},r.a.createElement($,{reloadAfterOnLoginSuccess:g,setVisibility:d,successCallbackConfig:i,isModalLogin:c}))))}}]),n}(o.PureComponent),ze=Object(a.withRouter)(He),We=n(850),Je=n(6);function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Qe(e,t,n){return t&&Xe(e.prototype,t),n&&Xe(e,n),e}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=tt(e);if(t){var r=tt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return $e(this,n)}}function $e(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?et(e):t}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nt=Je.d.getEnvVariable,ot=Je.d.EnvVariable.LANGUAGE_TAG,rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(n,e);var t=Ye(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={actionErrors:Ce,fieldErrors:Ce,loginPassword:""},o.handleGoBack=o.handleGoBack.bind(et(o)),o.handleInputChange=o.handleInputChange.bind(et(o)),o.handleSubmit=o.handleSubmit.bind(et(o)),o.handleForgotPassword=o.handleForgotPassword.bind(et(o)),o}return Qe(n,null,[{key:"propTypes",get:function(){return{history:c.a.shape({push:c.a.func,goBack:c.a.func}).isRequired,loginEmail:c.a.string,loginEnterPwdConfig:z.isRequired,loginSigninConfig:H.isRequired,handleGoBack:c.a.func.isRequired,handleForgotPassword:c.a.func.isRequired,facebookLoginEnabled:c.a.bool,googleLoginEnabled:c.a.bool,googleAuth2:c.a.shape({signIn:c.a.func}),facebookConfig:J.isRequired,googleConfig:K.isRequired,successCallbackConfig:Q.isRequired,setVisibility:c.a.func.isRequired,reloadAfterOnLoginSuccess:c.a.bool.isRequired,spinnerCallback:c.a.func.isRequired,fromP2pLinks:c.a.bool,sliderTheme:c.a.bool}}},{key:"defaultProps",get:function(){return{loginEmail:null,facebookLoginEnabled:!1,googleLoginEnabled:!1,googleAuth2:null,fromP2pLinks:!1,sliderTheme:!1}}}]),Qe(n,[{key:"componentDidMount",value:function(){this.props.loginEnterPwdConfig.showRecaptcha&&function(){var e="googleRecaptchaScript";if(document.getElementById(e)){var t=document.getElementById("gRecaptcha");grecaptcha.render(t,{sitekey:t.dataset.sitekey})}else{var n=document.createElement("script");n.id=e,n.src="https://www.google.com/recaptcha/api.js?hl=".concat(nt(ot));var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o)}}();var e=document.getElementById("loginPassword");!Object(fe.a)().isMobile&&e&&e.focus()}},{key:"handleInputChange",value:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e.target.name,t))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.props,o=n.loginEmail,r=n.loginEnterPwdConfig,i=n.successCallbackConfig,a=n.spinnerCallback,s=n.setVisibility,l=n.reloadAfterOnLoginSuccess,c=r.redirectUrl,u=r.sourceId,d=r.whyRegister,g=r.zip,p=r.fbUser,f=r.isGoogleAccountBindingRequest,b=r.isGoogleUser,h=r.googleAccountBinding,m=r.showRecaptcha,y=void 0!==m&&m,O={redirectUrl:c,"authRequestContext.sourceId":u,"authRequestContext.whyRegister":d,"authRequestContext.zip":g,springSecurityRememberMe:"true",loginEmail:o,fbUser:p,isGoogleUser:b,googleAccountBinding:h,loginPassword:this.state.loginPassword};if(y){var E=document.querySelectorAll('[name="'.concat("g-recaptcha-response",'"]'))[0],v=E?E.value:"";v&&(O["".concat("g-recaptcha-response")]=v)}return Object(we.d)(O,{reloadAfterOnLoginSuccess:l,setVisibility:s,spinnerCallback:a},i).then((function(e){e.success||t.setState({fieldErrors:Se(e,"fieldErrors.loginPassword",Ce),actionErrors:e.actionErrors.length?e.actionErrors:Ce}),e.success&&f&&Object(We.b)()})),null}},{key:"handleGoBack",value:function(e){e.preventDefault();var t=this.props.history,n=this.props.loginSigninConfig,o=n.googleAccountBindingRedirect,r=n.redirectUrl;o&&r?window.location=r:(this.props.handleGoBack(),t.goBack())}},{key:"handleForgotPassword",value:function(e){e.preventDefault();var t=this.props.history;this.props.handleForgotPassword(),t.push("/forgotPwd")}},{key:"render",value:function(){var e=this.props,t=e.facebookConfig,n=e.facebookLoginEnabled,o=e.googleAuth2,i=e.googleConfig,a=e.googleLoginEnabled,s=e.loginEmail,l=e.loginEnterPwdConfig,c=l.fbUser,d=l.isGoogleAccountBindingRequest,g=l.isGoogleUser,p=l.recaptchaSiteKey,f=void 0===p?"":p,b=l.redirectUrl,h=l.showRecaptcha,y=void 0!==h&&h,E=e.reloadAfterOnLoginSuccess,v=e.setVisibility,k=e.spinnerCallback,w=e.fromP2pLinks,C=e.successCallbackConfig,S=e.sliderTheme,L=n&&c,j=a&&g,R=Object(u.a)("login_register.form.sign_in.submit"),_=S?void 0:Object(u.a)("login_register.form.password"),P=r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},r.a.createElement("fieldset",null,r.a.createElement("input",{type:"hidden",value:b,id:"regLoginRedirectUrl"}),r.a.createElement("legend",{className:O.a.legend},s),r.a.createElement(oe,{fieldErrors:this.state.fieldErrors,label:Object(u.a)("login_register.form.password"),id:"loginPassword",name:"loginPassword",onChange:this.handleInputChange,placeholder:_,required:!0,type:"password",value:this.state.loginPassword,dataCgFt:"login-password-input"}),y&&r.a.createElement("div",{id:"gRecaptcha",className:O.a.formGroup,"data-sitekey":f}),r.a.createElement("div",{className:O.a.formGroup},r.a.createElement(B.a,{fullWidth:!0,variant:"secondary",dataCgFt:"login-sign-in-button"},R)),r.a.createElement("div",{className:O.a.formGroup},r.a.createElement("a",{id:"goBackToLogin",href:"#goback",className:m()(O.a.btn,O.a.btnBlock),dangerouslySetInnerHTML:{__html:Object(u.a)("reset_password.success.go_back.link")},onClick:this.handleGoBack})),r.a.createElement("a",{className:O.a.defaultLink,href:"#forgotPasswordReact",dangerouslySetInnerHTML:{__html:Object(u.a)("login_register.form.password.forgot.link")},onClick:this.handleForgotPassword}))),A=!0;return w&&(L||j)&&(A=!1),r.a.createElement("div",null,d&&r.a.createElement("div",{className:m()(O.a.alert,O.a.alertInfo),dangerouslySetInnerHTML:{__html:Object(u.a)("login.google.confirm.password")}}),r.a.createElement(pe,{actionErrors:this.state.actionErrors}),r.a.createElement("div",null,A?P:r.a.createElement("div",{className:O.a.formGroup},s)),(L||j)&&A&&r.a.createElement("p",{className:O.a.regLoginDivider},Object(u.a)("mobile.login_register.login_option_divider")),L&&r.a.createElement("div",{className:O.a.cgLoginRegisterOauth},r.a.createElement(me,{config:t})),j&&r.a.createElement("div",{className:O.a.cgLoginRegisterOauth},r.a.createElement(ke,{config:i,googleAuth2:o,reloadAfterOnLoginSuccess:E,setVisibility:v,spinnerCallback:k,successCallbackConfig:C})))}}]),n}(o.PureComponent),it=Object(a.withRouter)(rt);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function lt(e,t,n){return t&&st(e.prototype,t),n&&st(e,n),e}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=pt(e);if(t){var r=pt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return dt(this,n)}}function dt(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?gt(e):t}function gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(n,e);var t=ut(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state={actionErrors:Ce,fieldErrors:Ce,authCode:""},Object(b.trackUiUsage)({uiElement:Object(E.n)(e.isModalLogin,e.sliderTheme),uiObject:E.h,action:"displayed"}),o.handleInputChange=o.handleInputChange.bind(gt(o)),o.handleSubmit=o.handleSubmit.bind(gt(o)),o}return lt(n,null,[{key:"propTypes",get:function(){return{history:c.a.shape({push:c.a.func}).isRequired,handleAuthCodeEntered:c.a.func.isRequired,loginEnterAuthCodeConfig:V.isRequired,reloadAfterOnLoginSuccess:c.a.bool.isRequired,setVisibility:c.a.func.isRequired,spinnerCallback:c.a.func.isRequired,successCallbackConfig:Q.isRequired,isModalLogin:c.a.bool.isRequired,sliderTheme:c.a.bool.isRequired}}}]),lt(n,[{key:"handleInputChange",value:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e.target.name,t))}},{key:"handleSubmit",value:function(e){var t=this;e&&e.preventDefault&&e.preventDefault();var n=this.props,o=n.history,r=n.handleAuthCodeEntered,i=n.reloadAfterOnLoginSuccess,a=n.spinnerCallback,s=n.successCallbackConfig,l=n.setVisibility,c=n.isModalLogin,u=n.sliderTheme,d=this.props.loginEnterAuthCodeConfig,g=d.redirectUrl,p=d.sourceId,f=d.whyRegister,h=d.zip,m=d.loginEmail,y=d.authCodeTtl,O=d.authCodeHmac,v=d.skipOptionalStep,k={redirectUrl:g,"authRequestContext.sourceId":p,"authRequestContext.whyRegister":f,"authRequestContext.zip":h,springSecurityRememberMe:!0,loginEmail:m,authCodeTtl:y,authCodeHmac:O,skipOptionalStep:v,authCode:this.state.authCode};Object(b.trackUiUsage)({uiElement:Object(E.n)(c,u),uiObject:E.h,action:"submitted"}),Object(we.c)(k,{handleAuthCodeEntered:r,history:o,reloadAfterOnLoginSuccess:i,setVisibility:l,skipOptionalStep:v,spinnerCallback:a},s).then((function(e){e.success||t.setState({fieldErrors:Se(e,"fieldErrors.authCode",Ce),actionErrors:e.actionErrors.length?e.actionErrors:Ce,authCode:""})}))}},{key:"render",value:function(){var e=this.props.loginEnterAuthCodeConfig.authCodeInfoMsg,t=r.a.createElement("div",{className:m()(O.a.alert,O.a.alertInfo)},e||Object(u.a)("auth_code.form.never.set.pwd.msg"));return r.a.createElement("div",null,t,r.a.createElement(pe,{actionErrors:this.state.actionErrors}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("fieldset",null,r.a.createElement(oe,{fieldErrors:this.state.fieldErrors,id:"authCodeInput",label:Object(u.a)("login_register.form.auth.code"),name:"authCode",onChange:this.handleInputChange,required:!0,type:"password",value:this.state.authCode}),r.a.createElement("button",{className:m()(O.a.btn,O.a.btnPrimary,O.a.btnBlock),type:"submit"},Object(u.a)("login_register.form.sign_in.submit")))))}}]),n}(o.PureComponent),bt=Object(a.withRouter)(ft),ht=/^\w+$/,mt={};mt.MISSING=Object(u.a)("login_register.form.validation.screen_name.missing"),mt.LENGTH=Object(u.a)("login_register.form.validation.screen_name.length"),mt.FORMAT=Object(u.a)("login_register.form.validation.screen_name.format"),mt.PREFIX=Object(u.a)("login_register.form.validation.screen_name.contains.guru");var yt=function(e){var t=[];return 0===e.trim().length?t.push(mt.MISSING):(e.length>50&&t.push(mt.LENGTH),ht.test(e)||t.push(mt.FORMAT),e.toLowerCase().startsWith("Guru".toLowerCase())&&t.push(mt.PREFIX)),t};function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function wt(e,t,n){return t&&kt(e.prototype,t),n&&kt(e,n),e}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Rt(e);if(t){var r=Rt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Lt(this,n)}}function Lt(e,t){return!t||"object"!==Ot(t)&&"function"!=typeof t?jt(e):t}function jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}(n,e);var t=St(n);function n(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=(o=t.call(this,e)).props.loginUpdatePwdConfig.initiallyDisplayedScreenName;return o.state={updatedScreenName:r,updatedPassword:"",actionErrors:Ce,updatedScreenNameFieldErrors:Ce,updatedPasswordFieldErrors:Ce},Object(b.trackUiUsage)({uiElement:Object(E.n)(e.isModalLogin,e.sliderTheme),uiObject:E.l,action:"displayed"}),o.handleInputChange=o.handleInputChange.bind(jt(o)),o.handleSubmit=o.handleSubmit.bind(jt(o)),o.validateScreenNameChange=o.validateScreenNameChange.bind(jt(o)),o.handleSkip=o.handleSkip.bind(jt(o)),o}return wt(n,null,[{key:"getUpdatePasswordMessage",value:function(e,t){return e?Object(u.a)("common.update.pwd.screenname"):t?Object(u.a)("common.update.pwd.save.time.and.update"):Object(u.a)("common.update.pwd.screenname.optional")}},{key:"propTypes",get:function(){return{loginUpdatePwdConfig:W.isRequired,reloadAfterOnLoginSuccess:c.a.bool.isRequired,setVisibility:c.a.func.isRequired,spinnerCallback:c.a.func.isRequired,successCallbackConfig:Q.isRequired,isModalLogin:c.a.bool.isRequired,sliderTheme:c.a.bool.isRequired}}}]),wt(n,[{key:"componentWillMount",value:function(){this.timer=null}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"handleInputChange",value:function(e){"updatedScreenName"===e.target.name&&clearTimeout(this.timer);var t="checkbox"===e.target.type?e.target.checked:e.target.value;this.setState(vt({},e.target.name,t)),"updatedScreenName"===e.target.name&&(this.timer=setTimeout(this.validateScreenNameChange,500))}},{key:"validateScreenNameChange",value:function(){var e=this.state.updatedScreenName,t=yt(e);return t.length?(this.setState({updatedScreenNameFieldErrors:t}),!1):(this.setState({updatedScreenNameFieldErrors:Ce}),!0)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.props,o=n.loginUpdatePwdConfig,r=o.redirectUrl,i=o.startUrl,a=o.originalScreenName,s=o.sourceId,l=o.whyRegister,c=o.authenticationToken,u=n.reloadAfterOnLoginSuccess,d=n.setVisibility,g=n.spinnerCallback,p=n.successCallbackConfig,f=n.isModalLogin,h=n.sliderTheme,m=this.state,y=m.updatedScreenName,O={redirectUrl:r,startUrl:i,originalScreenName:a,onRegister:!0,"authRequestContext.whyRegister":l,"authRequestContext.sourceId":s,authenticationToken:c||"",updatedScreenName:y,updatedPassword:m.updatedPassword};Object(b.trackUiUsage)({uiElement:Object(E.n)(f,h),uiObject:E.l,action:"submitted"}),(a===y||this.validateScreenNameChange())&&Object(we.f)(O,{reloadAfterOnLoginSuccess:u,setVisibility:d,spinnerCallback:g},p).then((function(e){e.success||t.setState({updatedPassword:"",updatedScreenNameFieldErrors:Se(e,"fieldErrors.updatedScreenName",Ce),updatedPasswordFieldErrors:Se(e,"fieldErrors.updatedPassword",Ce),actionErrors:e.actionErrors.length?e.actionErrors:Ce})}))}},{key:"handleSkip",value:function(e){e.preventDefault(),Object(x.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({reloadAfterOnLoginSuccess:this.props.reloadAfterOnLoginSuccess,setVisibility:this.props.setVisibility},this.props.successCallbackConfig))}},{key:"render",value:function(){var e=this.props.loginUpdatePwdConfig,t=e.authenticationToken,o=e.authCodeHmac,i=e.showSkipButton,a=n.getUpdatePasswordMessage(t,o),s=r.a.createElement("div",{className:O.a.updatePwdSkipBox},r.a.createElement("a",{href:"#",id:"skipUpdatePwdButton",onClick:this.handleSkip},Object(u.a)("common.skip")));return r.a.createElement("div",null,r.a.createElement(pe,{actionErrors:this.state.actionErrors}),r.a.createElement("div",null,a),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("fieldset",null,r.a.createElement(oe,{fieldErrors:this.state.updatedScreenNameFieldErrors,id:"updatedScreenName",label:Object(u.a)("login_register.form.screen_name"),name:"updatedScreenName",onChange:this.handleInputChange,required:!0,value:this.state.updatedScreenName}),r.a.createElement(oe,{fieldErrors:this.state.updatedPasswordFieldErrors,id:"updatedPassword",label:Object(u.a)("login_register.form.password"),name:"updatedPassword",onChange:this.handleInputChange,required:!0,type:"password",value:this.state.updatedPassword}),r.a.createElement("button",{name:"submitType",type:"submit",id:"updatePwdButton",className:m()(O.a.btn,O.a.btnPrimary,O.a.btnBlock)},Object(u.a)("common.btn.save")),i&&s)))}}]),n}(o.PureComponent),Pt=Object(a.withRouter)(_t);function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ut(e,t,n){return t&&Mt(e.prototype,t),n&&Mt(e,n),e}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Dt(e);if(t){var r=Dt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Bt(this,n)}}function Bt(e,t){return!t||"object"!==At(t)&&"function"!=typeof t?Gt(e):t}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(n,e);var t=Nt(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){It(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({actionErrors:Ce,fieldErrors:Ce},o.props.loginForgotPwdConfig),Object(b.trackUiUsage)({uiElement:Object(E.n)(e.isModalLogin,e.sliderTheme),uiObject:E.j,action:"displayed"}),o.handleGoBack=o.handleGoBack.bind(Gt(o)),o.handleSubmit=o.handleSubmit.bind(Gt(o)),o.handleInputChange=o.handleInputChange.bind(Gt(o)),o.requestFail=o.requestFail.bind(Gt(o)),o.requestSuccess=o.requestSuccess.bind(Gt(o)),o}return Ut(n,null,[{key:"propTypes",get:function(){return{history:c.a.shape({push:c.a.func}).isRequired,handleGoBack:c.a.func.isRequired,spinnerCallback:c.a.func.isRequired,loginForgotPwdConfig:X.isRequired,isModalLogin:c.a.bool.isRequired,sliderTheme:c.a.bool.isRequired}}}]),Ut(n,[{key:"componentDidMount",value:function(){if(!Object(fe.a)().isMobile){var e=document.getElementById("resendPwdEmail");e&&e.focus()}}},{key:"getResetForm",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{className:m()(O.a.alert,O.a.alertInfo),dangerouslySetInnerHTML:{__html:Object(u.a)("forgot_password.password_reset_link.form.message")}}),r.a.createElement(pe,{actionErrors:this.state.actionErrors}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(oe,{id:"resendPwdEmail",fieldErrors:this.state.fieldErrors.email,name:"email",label:Object(u.a)("email.address.label"),onChange:this.handleInputChange,required:!0,value:this.state.email}),r.a.createElement("div",{className:O.a.resetSubmitButtons},!this.state.hideGoBackLinks&&r.a.createElement("a",{className:m()(O.a.btn,O.a.btnDefault),onClick:this.handleGoBack,href:"#enterPwd",dangerouslySetInnerHTML:{__html:Object(u.a)("reset_password.success.go_back.link")}}),r.a.createElement("button",{type:"submit",className:m()(O.a.btn,O.a.btnPrimary),dangerouslySetInnerHTML:{__html:Object(u.a)("reset_password.form.submit.label")}}))))}},{key:"getResetLinkSent",value:function(){var e=this.state,t=e.email,n=e.hideGoBackLinks,o=t?Object(u.a)("forgot_password.password_reset_link.success.message.with_email",t):Object(u.a)("forgot_password.password_reset_link.success.message.no_email");return r.a.createElement("div",null,r.a.createElement("p",{className:m()(O.a.alert,O.a.alertSuccess),dangerouslySetInnerHTML:{__html:o}}),!n&&r.a.createElement("a",{href:"#login",className:m()(O.a.btn,O.a.btnPrimary,O.a.btnBlock),onClick:this.handleGoBack,dangerouslySetInnerHTML:{__html:Object(u.a)("reset_password.success.login.link")}}))}},{key:"handleInputChange",value:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;this.setState(It({},e.target.name,t))}},{key:"handleGoBack",value:function(e){e.preventDefault();var t=this.props.history;this.props.handleGoBack(),t.goBack()}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state,o=n.hideGoBackLinks,r=n.email,i=n.sourceId,a=n.whyRegister,s=n.zip,l=this.props,c=l.spinnerCallback,u=l.isModalLogin,d=l.sliderTheme,g={"authRequestContext.sourceId":i,"authRequestContext.whyRegister":a,"authRequestContext.zip":s,email:r,hideGoBackLinks:o};Object(b.trackUiUsage)({uiElement:Object(E.n)(u,d),uiObject:E.j,action:"submitted"}),Object(we.b)(g,c).then((function(e){var n=e.success,o=Tt(e,["success"]);n?t.requestSuccess(o):t.requestFail(o)}))}},{key:"requestFail",value:function(e){this.setState({actionErrors:e.actionErrors,fieldErrors:e.fieldErrors})}},{key:"requestSuccess",value:function(e){var t=e.email,n=e.hideGoBackLinks,o=e.passwordResetLinkSent,r=e.sourceId,i=e.whyRegister,a=e.zip;this.setState({email:t,hideGoBackLinks:n,passwordResetLinkSent:o,sourceId:r,whyRegister:i,zip:a,actionErrors:Ce,fieldErrors:Ce})}},{key:"render",value:function(){return this.state.passwordResetLinkSent?this.getResetLinkSent():this.getResetForm()}}]),n}(o.PureComponent),Vt=Object(a.withRouter)(xt);function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Wt(e,t,n){return t&&zt(e.prototype,t),n&&zt(e,n),e}function Jt(e,t){return(Jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Zt(e);if(t){var r=Zt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Xt(this,n)}}function Xt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?Qt(e):t}function Qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jt(e,t)}(n,e);var t=Kt(n);function n(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=(o=t.call(this,e)).getLoginHeaderTitle();return o.state={headerTitle:r,loginEmail:e.loginEmail,loginPwd:"",prevJsonResponse:{},showDefaultSpinner:!1,spinnerText:null},o.handleEmailEntered=o.handleEmailEntered.bind(Qt(o)),o.handleAuthCodeEntered=o.handleAuthCodeEntered.bind(Qt(o)),o.handleGoBackToEnterEmail=o.handleGoBackToEnterEmail.bind(Qt(o)),o.handleForgotPassword=o.handleForgotPassword.bind(Qt(o)),o.handleCancelResetPwdRequest=o.handleCancelResetPwdRequest.bind(Qt(o)),o.handleSpinnerRequest=o.handleSpinnerRequest.bind(Qt(o)),o.handleShowLoginEvent=o.handleShowLoginEvent.bind(Qt(o)),o.handleCloseLoginEvent=o.handleCloseLoginEvent.bind(Qt(o)),o.handleFacebookOnLoginSuccess=o.handleFacebookOnLoginSuccess.bind(Qt(o)),o.showSliderTheme=o.showSliderTheme.bind(Qt(o)),o.getLoginHeaderTitle=o.getLoginHeaderTitle.bind(Qt(o)),o}return Wt(n,null,[{key:"getHeaderTitle",value:function(e,t){return{enterPwd:Object(u.a)("common.welcome.back"),enterAuthCode:Object(u.a)("common.auth.code.title"),updatePwd:t?Object(u.a)("common.update.pwd.screenname.registered.title"):Object(u.a)("common.update.pwd.screenname.signedin.title")}[e]}},{key:"propTypes",get:function(){return{configureLogin:c.a.func.isRequired,disableEmailField:c.a.bool,facebookConfig:J,googleAnalyticsAccountNumber:c.a.string.isRequired,googleAuth2:c.a.shape({signIn:c.a.func}),appleIdLoaded:c.a.bool,googleConfig:K,headerTitleOverride:c.a.string,initLogin:c.a.func.isRequired,invokeCustomSpinner:c.a.func,isModal:c.a.bool,emailFromCookies:c.a.string,loginEmail:c.a.string,loginSigninConfig:H.isRequired,onLogin:c.a.func,onModalClose:c.a.func,onLoginStepChange:c.a.func,reloadAfterOnLoginSuccess:c.a.bool.isRequired,setVisibility:c.a.func.isRequired,show:c.a.bool,showAppleLogin:c.a.bool,showFacebookLogin:c.a.bool,showGoogleLogin:c.a.bool,updateUserMenuOnLogin:c.a.bool,wrapperClassName:c.a.string,fromP2pLinks:c.a.bool,isRegisteredUser:c.a.bool,isReactNative:c.a.bool,showSocialLoginOnly:c.a.bool,isAutoTriggered:c.a.bool,cancelRedirectUrl:c.a.string,useSlider:c.a.bool,fitContainer:c.a.bool}}},{key:"defaultProps",get:function(){return{disableEmailField:!1,facebookConfig:{},googleAuth2:null,appleIdLoaded:!1,googleConfig:{},invokeCustomSpinner:null,headerTitleOverride:"",isModal:!1,emailFromCookies:"",loginEmail:"",onLogin:null,onModalClose:g.emptyFunction,onLoginStepChange:g.emptyFunction,show:!0,showAppleLogin:!0,showFacebookLogin:!0,showGoogleLogin:!0,updateUserMenuOnLogin:!0,wrapperClassName:"",fromP2pLinks:!1,isRegisteredUser:!1,isReactNative:window.ReactNativeWebView,showSocialLoginOnly:!1,isAutoTriggered:!1,cancelRedirectUrl:null,useSlider:!1,fitContainer:!1}}}]),Wt(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.initLogin,n=e.googleConfig.clientId,o=e.googleAnalyticsAccountNumber,r=e.show,i=e.isReactNative,a=e.isAutoTriggered,s=e.loginSigninConfig.disableForMobileApp,l=e.cancelRedirectUrl;i?s||window.ReactNativeWebView.postMessage(JSON.stringify({type:"LOGIN_MODAL_OPEN",redirectUrl:window.location.pathname+window.location.search+window.location.hash,cancelRedirectUrl:l,isAutoTriggered:a})):(r&&this.handleSpinnerRequest(!0),t({googleClientId:n,googleAnalyticsAccountNumber:o,spinnerCallback:this.handleSpinnerRequest}),document.addEventListener(E.m,this.handleShowLoginEvent),document.addEventListener(E.e,this.handleCloseLoginEvent),document.addEventListener(E.b,this.handleFacebookOnLoginSuccess))}},{key:"componentDidUpdate",value:function(e){var t=this.props.loginEmail;t!==e.loginEmail&&this.setState({loginEmail:t})}},{key:"componentWillUnmount",value:function(){this.props.onLoginStepChange({step:!1}),document.removeEventListener(E.m,this.handleShowLoginEvent),document.removeEventListener(E.e,this.handleCloseLoginEvent),document.removeEventListener(E.b,this.handleFacebookOnLoginSuccess)}},{key:"getLoginHeaderTitle",value:function(){return this.showSliderTheme()?Object(u.a)("login.slider.title"):Object(u.a)("login.popup.title")}},{key:"handleFacebookOnLoginSuccess",value:function(){var e=this.props,t=e.facebookConfig.redirectUrl,n=e.isModal,o=e.onLogin,r=e.reloadAfterOnLoginSuccess,i=e.setVisibility,a=e.updateUserMenuOnLogin,s=this.state.prevJsonResponse.responseRedirect;Object(x.b)({isModal:n,onLogin:o,redirectUrl:t,reloadAfterOnLoginSuccess:r,responseRedirect:s,setVisibility:i,updateUserMenuOnLogin:a})}},{key:"handleShowLoginEvent",value:function(){var e=window.__LOGIN_MODAL_PREFLIGHT__;this.props.configureLogin(e),this.props.setVisibility(!0),delete window.__LOGIN_MODAL_PREFLIGHT__}},{key:"handleCloseLoginEvent",value:function(){this.props.setVisibility(!1)}},{key:"handleEmailEntered",value:function(e,t,o){this.setState({headerTitle:n.getHeaderTitle(t.step,o),loginEmail:e,prevJsonResponse:t}),this.props.onLoginStepChange(t)}},{key:"handleAuthCodeEntered",value:function(e){this.setState({headerTitle:n.getHeaderTitle(e.step),prevJsonResponse:e}),this.props.onLoginStepChange(e)}},{key:"handleGoBackToEnterEmail",value:function(){this.setState({headerTitle:this.getLoginHeaderTitle()})}},{key:"handleForgotPassword",value:function(){this.setState({headerTitle:Object(u.a)("common.forgot.pwd.title")})}},{key:"handleCancelResetPwdRequest",value:function(){this.setState({headerTitle:Object(u.a)("common.welcome.back")})}},{key:"handleSpinnerRequest",value:function(e,t){var n=this.props.invokeCustomSpinner;n?n(e,t):this.setState({showDefaultSpinner:e,spinnerText:t})}},{key:"showSliderTheme",value:function(){var e=this.props,t=e.isModal,n=e.fromP2pLinks,o=e.useSlider;return t&&!n&&o&&(Object(p.b)()&&Object(d.a)("LOGIN_SLIDER_V2")||!Object(p.b)()&&Object(d.a)("LOGIN_MODAL_REDESIGN"))}},{key:"render",value:function(){var e=this,t=this.state,n=t.headerTitle,o=t.loginEmail,i=t.prevJsonResponse,l=t.showDefaultSpinner,c=t.spinnerText,u=i.sourceId,g=i.whyRegister,p=i.zip,b=i.redirectUrl,h=this.props,m=h.isModal,y=h.onModalClose,O=h.onLoginStepChange,E=h.facebookConfig,v=h.googleConfig,k=h.showAppleLogin,w=h.showFacebookLogin,C=h.showGoogleLogin,S=h.loginSigninConfig,L=h.onLogin,j=h.googleAuth2,R=h.appleIdLoaded,_=h.show,P=h.setVisibility,A=h.reloadAfterOnLoginSuccess,T=h.invokeCustomSpinner,q=h.wrapperClassName,I=h.headerTitleOverride,U=h.disableEmailField,F=h.updateUserMenuOnLogin,N=h.fromP2pLinks,B=h.isRegisteredUser,G=h.isReactNative,D=h.showSocialLoginOnly,x=h.emailFromCookies,V=h.fitContainer,H=S.redirectUrl,z={isModal:m,onLogin:L,redirectUrl:H,responseRedirect:b,updateUserMenuOnLogin:F},W=this.showSliderTheme(),J=W?n:I||n;return _&&!G&&r.a.createElement(s.MemoryRouter,null,r.a.createElement(M,{headerTxt:J,isModal:m,onModalClose:y,wrapperClassName:q,onLoginStepChange:O,fromP2pLinks:N,sliderTheme:W,showSocialLoginOnly:!0,fitContainer:V},!T&&r.a.createElement(f.a,{loading:l,text:c}),r.a.createElement(a.Route,{exact:!0,path:"/",render:function(){return D&&Object(d.a)("SAVE_SUBSCRIBE_SEARCH_WITH_LOGIN")?r.a.createElement(ze,{facebookConfig:E,googleConfig:v,googleAuth2:j,handleEmailEntered:e.handleEmailEntered,isModalLogin:m,loginSigninConfig:S,reloadAfterOnLoginSuccess:A,setVisibility:P,showAppleLogin:!1,showFacebookLogin:!1,showGoogleLogin:C,successCallbackConfig:z,spinnerCallback:e.handleSpinnerRequest}):r.a.createElement(Me,{disableEmailField:U,facebookConfig:E,googleConfig:v,googleAuth2:j,appleIdLoaded:R,handleEmailEntered:e.handleEmailEntered,isModalLogin:m,loginEmail:o,loginSigninConfig:S,reloadAfterOnLoginSuccess:A,setVisibility:P,showAppleLogin:k,showFacebookLogin:w,showGoogleLogin:C,successCallbackConfig:z,spinnerCallback:e.handleSpinnerRequest,fromP2pLinks:N,emailFromCookies:x,isRegisteredUser:B,sliderTheme:W})}}),r.a.createElement(a.Route,{path:"/enterAuthCode",render:function(){return r.a.createElement(bt,{handleAuthCodeEntered:e.handleAuthCodeEntered,loginEnterAuthCodeConfig:i,reloadAfterOnLoginSuccess:A,setVisibility:P,spinnerCallback:e.handleSpinnerRequest,successCallbackConfig:z,isModalLogin:m,sliderTheme:W})}}),r.a.createElement(a.Route,{path:"/enterPwd",render:function(){return r.a.createElement(it,{loginEmail:o,facebookLoginEnabled:w,facebookConfig:E,googleLoginEnabled:C,googleConfig:v,googleAuth2:j,loginEnterPwdConfig:i,loginSigninConfig:S,handleGoBack:e.handleGoBackToEnterEmail,handleForgotPassword:e.handleForgotPassword,reloadAfterOnLoginSuccess:A,spinnerCallback:e.handleSpinnerRequest,fromP2pLinks:N,setVisibility:P,successCallbackConfig:z,isModalLogin:m,sliderTheme:W})}}),r.a.createElement(a.Route,{path:"/updatePwd",render:function(){return r.a.createElement(Pt,{loginUpdatePwdConfig:i,reloadAfterOnLoginSuccess:A,setVisibility:P,spinnerCallback:e.handleSpinnerRequest,successCallbackConfig:z,isModalLogin:m,sliderTheme:W})}}),r.a.createElement(a.Route,{path:"/forgotPwd",render:function(){return r.a.createElement(Vt,{handleGoBack:e.handleCancelResetPwdRequest,spinnerCallback:e.handleSpinnerRequest,loginForgotPwdConfig:{hideGoBackLinks:!1,passwordResetLinkSent:!1,email:o,sourceId:u,whyRegister:g,zip:p},isModalLogin:m,sliderTheme:W})}})))}}]),n}(r.a.Component),$t=n(864),en=n(211),tn=n(2075);function nn(){return(nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var an={configureLogin:en.c,initLogin:en.e,setVisibility:en.f},sn=Object(i.connect)((function(e,t){var n=Object(tn.c)(e),o=n.disableEmailField,r=n.facebookLoginEnabled,i=n.googleAnalyticsAccountNumber,a=n.googleAuth2,s=n.appleIdLoaded,l=n.isModal,c=n.loginEmail,u=n.reloadAfterOnLoginSuccess,d=n.show,g=n.showAppleLogin,p=n.showFacebookLogin,f=n.showGoogleLogin,b=n.updateUserMenuOnLogin,h=n.fromP2pLinks,m=n.isRegisteredUser;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({disableEmailField:o,facebookConfig:Object(tn.a)(e),googleAnalyticsAccountNumber:i,googleAuth2:a,appleIdLoaded:s,googleConfig:Object(tn.b)(e),invokeCustomSpinner:t.invokeCustomSpinner,isModal:l,loginEmail:c,loginSigninConfig:Object(tn.d)(e,t),onLogin:Object(tn.e)(e,t),onModalClose:t.onModalClose,reloadAfterOnLoginSuccess:u,show:d,showAppleLogin:g,showFacebookLogin:r&&p,showGoogleLogin:f,updateUserMenuOnLogin:b,fromP2pLinks:h,isRegisteredUser:m,isAutoTriggered:t.isAutoTriggered},Object(tn.f)(e,t))}),an)(Yt);t.default=function(e){return r.a.createElement(sn,nn({},e,{store:$t.a}))}},1291:function(e,t,n){e.exports={cgLoginComponent:"_2xRoMh",modal:"cjo3dh",show:"Z9gkZm",sliderBackground:"FehzdG",block:"A7RNmU",header:"JiFdHM",modalInner:"_63Hr8i",slider:"_3g5jeX",sliderTitle:"dipRoC",sliderCta:"_5mK4ZQ",controlLabel:"_3qcHPs",formControl:"_28L2Qf",oauthButtonContainer:"_2Ur9Se",modalClose:"_56pE3j",showCloseButton:"_6mLAH5",sliderClose:"EHqaam",regLoginDivider:"_5X2EVg",sliderLoginDivider:"_4ytuCn",cgLoginRegisterOauth:"_4Gwymf",panelHeading:"_3nTzmJ",p2pLoginIconWrapper:"_3M8oXS",loginHeading:"_3c1rst",panelBody:"JrxGGj",ftLoginButton:"ALdQxF",ftLoginNextButton:"_5VDFCv",cgDisclaimer:"_2AEFqq",socialLoginList:"_4gpcQW",formGroup:"_5WMc45",hasFeedback:"_5WuDZW",helpBlock:"HNihLZ",legend:"iVEd8J",hasError:"dYcEGb",close:"_4dP8Po",btn:"_3pfLw7","btn-link":"_3tiFsM",defaultLink:"_4ys2gy",btnDefault:"XvN164",btnPrimary:"_4fx1Td",resetSubmitButtons:"_3ztQfu",btnBlock:"_2Gq9Bo",alert:"_5YjDrd",alertSuccess:"_5ApbNd",alertInfo:"B6tzPU",alertDanger:"_5LW5YM",socialIcon:"_43SsTz",socialFacebook:"_3NL37E",sliderDisclaimer:"_5NqaGP",updatePwdSkipBox:"_4b8hk2"}},2075:function(module,__webpack_exports__,__webpack_require__){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}__webpack_require__.d(__webpack_exports__,"c",(function(){return getLogin})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getLoginSigninConfig})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getFacebookOAuthConfig})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getGoogleOAuthConfig})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getOnLogin})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getPropOverrides}));var getLogin=function(e){return e.login},getLoginSigninConfigFromState=function(e){var t=getLogin(e);return{authenticationToken:t.authenticationToken,googleAccountBinding:t.googleAccountBinding,googleAccountBindingRedirect:t.googleAccountBindingRedirect,redirectUrl:t.redirectUrl,serviceProvider:t.serviceProvider,skipOptionalStep:t.skipOptionalStep,sourceId:t.sourceId,startUrl:t.startUrl,whyRegister:t.whyRegister,zip:t.zip,disableForMobileApp:t.disableForMobileApp}},getLoginSigninConfigOverrides=function(e){var t=["skipOptionalStep","sourceId","whyRegister"];return Object.keys(e).reduce((function(n,o){return t.includes(o)&&null!=e[o]?_objectSpread(_objectSpread({},n),{},_defineProperty({},o,e[o])):n}),{})},getLoginSigninConfig=function(e,t){var n=getLoginSigninConfigFromState(e),o=getLoginSigninConfigOverrides(t);return _objectSpread(_objectSpread({},n),o)},getFacebookOAuthConfig=function(e){var t=getLogin(e),n=t.facebookAppId,o=t.facebookStateToken;return{appId:n,redirectUrl:t.facebookRedirectUrl,sourceId:t.sourceId,stateToken:o}},getGoogleOAuthConfig=function(e){var t=getLogin(e);return{clientId:t.googleClientId,sourceId:t.sourceId}},getOnLogin=function getOnLogin(state,props){var commonOnLoginSuccess=props.commonOnLoginSuccess,_getLogin4=getLogin(state),wrappedComponentOnLoginSuccess=_getLogin4.wrappedComponentOnLoginSuccess;return commonOnLoginSuccess||wrappedComponentOnLoginSuccess?function(){commonOnLoginSuccess&&commonOnLoginSuccess(),"string"==typeof wrappedComponentOnLoginSuccess&&""!==wrappedComponentOnLoginSuccess?eval(wrappedComponentOnLoginSuccess):"function"==typeof wrappedComponentOnLoginSuccess&&wrappedComponentOnLoginSuccess()}:null},getPropOverrides=function(e,t){var n=getLogin(e).facebookLoginEnabled,o=["disableEmailField","isModal","loginEmail","show","showFacebookLogin","updateUserMenuOnLogin"],r=Object.keys(t).reduce((function(e,n){return o.includes(n)&&null!=t[n]?_objectSpread(_objectSpread({},e),{},_defineProperty({},n,t[n])):e}),{});return null!=r.showFacebookLogin&&(r.showFacebookLogin=n&&r.showFacebookLogin),r}}}]);
//# sourceMappingURL=361614482eac60db82c5570fcb68fcfb.js.map